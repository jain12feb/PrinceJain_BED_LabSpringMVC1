<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
		integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/css/bootstrap.min.css"
		integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.6/dist/umd/popper.min.js"
		integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/js/bootstrap.min.js"
		integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
		crossorigin="anonymous"></script>

	<title>Employee Management System - All Employees</title>
</head>

<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<a class="navbar-brand" th:href="@{/employee/list}">
			<svg class="mb-2" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M48 0C21.5 0 0 21.5 0 48V464c0 26.5 21.5 48 48 48h96V432c0-26.5 21.5-48 48-48s48 21.5 48 48v80h89.9c-6.3-10.2-9.9-22.2-9.9-35.1c0-46.9 25.8-87.8 64-109.2V271.8 48c0-26.5-21.5-48-48-48H48zM64 240c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V240zm112-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V240c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H272c-8.8 0-16-7.2-16-16V240zM80 96h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V112zM272 96h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H272c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16zM576 272a80 80 0 1 0 -160 0 80 80 0 1 0 160 0zM352 477.1c0 19.3 15.6 34.9 34.9 34.9H605.1c19.3 0 34.9-15.6 34.9-34.9c0-51.4-41.7-93.1-93.1-93.1H445.1c-51.4 0-93.1 41.7-93.1 93.1z"></path></svg>
			EMS</a>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item active">
					<a class="nav-link" th:href="@{/employee/list}">Home <span class="sr-only">(current)</span></a>
				</li>
			</ul>
			<a th:href="@{/employee/add}" class="btn btn-light btn-sm">
				Add Employee
			</a>
		</div>
	</nav>
	<div class="container">
		<h3 class="mt-2 text-center">All Employees</h3>
		<hr>
		<div class="d-flex justify-content-between mb-3">
			<div class="input-group input-group-sm w-50 mr-1">
				<input id="search" type="text" class="form-control" aria-label="Sizing example input"
					aria-describedby="inputGroup-sizing-sm" placeholder="Search by employee name...">
				<div class="input-group-append">
					<div>
						<button class="btn btn-outline-primary btn-sm" type="button" id="button-addon2">Search
							<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor"
								class="bi bi-search ml-1" viewBox="0 0 15 15">
								<path
									d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
							</svg>
						</button>
					</div>
				</div>
			</div>
			<div>
				<select class="custom-select custom-select-sm w-35 mr-2">
					<option selected disabled>Filter By Designation</option>
					<option th:each="designation : ${designations}"
						th:value="@{/employee/list?(designation=${designation})}" th:text="${designation}"></option>
				</select>
			</div>
		</div>
		<table class="table table-bordered table-striped">
			<thead class="thead-dark">
				<tr>
					<th>First Name</th>
					<th>Last Name</th>
					<th>Avatar</th>
					<th>Email</th>
					<th>Salary</th>
					<th>Designation</th>
					<th colspan="2">Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr th:if="${employees.size() > 0}" th:each="tempEmp : ${employees}">
					<div class="modal fade" th:id="deleteModal+${tempEmp.id}" tabindex="-1" role="dialog"
						aria-labelledby="exampleModalLabel" aria-hidden="true">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h4 class="modal-title h4" id="exampleModalLabel">Are you sure you want to delete?
									</h4>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body h6">									
									<label>Name : </label>
									<span th:text="${tempEmp.fName} + ' ' + ${tempEmp.lName}"></span>
									<hr />
									<label>Email : </label>
									<span th:text="${tempEmp.email}"></span>
									<hr />
									<label>Salary : </label>
									<span th:text="${tempEmp.salary}"></span>
									<hr />
									<label>Designation : </label>
									<span th:text="${tempEmp.designation}"></span>
								</div>
								<div class="modal-footer">
									<form th:action="@{/employee/delete}" method="POST">
										<input type="hidden" name="empId" th:value="${tempEmp.id}" />
										<button type="submit" class="btn btn-danger">Yes! Delete it</button>
									</form>
									<button type="button" class="btn btn-secondary" data-dismiss="modal">Keep
										it</button>
								</div>
							</div>
						</div>
					</div>
					<td class="h6" th:text="${tempEmp.fName}" />
					<td class="h6" th:text="${tempEmp.lName}" />
					<td class="h6 text-center"><img src="https://github.com/mdo.png" alt="mdo" width="46" height="46" class="rounded-circle"></td>
					<td class="h6" th:text="${tempEmp.email}" />
					<td class="h6" th:text="${tempEmp.salary}" />
					<td class="h6" th:text="${tempEmp.designation}" />
					<td>
						<div class="row">
							<div class="col-small">
								<form action="#" th:action="@{/employee/update}" method="POST">
									<input type="hidden" name="empId" th:value="${tempEmp.id}" />
									<button type="submit" class="btn text-success"><svg
											xmlns="http://www.w3.org/2000/svg" width="24" height="24"
											fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 15 15">
											<path
												d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
											<path fill-rule="evenodd"
												d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z" />
										</svg></button>
								</form>
							</div>
						</div>
					</td>
					<td>
						<div class="row">
							<div class="col-small">
								<button type="button" class="btn text-danger" data-toggle="modal"
									th:attr="data-target='#deleteModal'+${tempEmp.id}" data-target="#deleteModal">
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
										class="bi bi-trash" viewBox="0 0 16 16">
										<path
											d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z" />
										<path
											d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z" />
									</svg>
								</button>
							</div>
						</div>
					</td>
				</tr>
				<tr th:unless="${employees.size() > 0}">
					<td colspan="6" class="h6 text-center">No Records Found</td>
				</tr>
			</tbody>
		</table>
	</div>

	<script th:inline="javascript">

		$(document).ready(function () {
			// Handle change event of select dropdown
			$('select').change(function () {
				const selectedOption = $(this).val();
				if (selectedOption) {
					window.location.href = selectedOption;
				}
			});

			// Handle change event of search inputbox
			$('#search').change(function () {
				const fName = $(this).val();
				if (fName) {
					window.location.href = "/employee/list?fName=" + fName;
				}
			});
		});
	</script>
</body>

</html>